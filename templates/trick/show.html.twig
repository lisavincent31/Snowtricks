{% extends 'base.html.twig' %}

{% block title %} {{ trick.name }} {% endblock %}

{% block body %}
    <div class="container-fluid position-relative px-0" >
        {# Full width images with trick's name #}
        <div class="bg-image" style="background-image:url('/assets/medias/tricks/{{ feature.name }}')">
            {% if (app.user) %}
                {% if (app.user.id == trick.author.id) %}
                    <div class="float-end my-4 mx-3 p-2 bg-transparent">
                        <a href="{{ path('app_trick_edit', {slug: trick.slug}) }}" class="btn btn-outline-success px-2 py-1">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <a href="{{ path('app_trick_delete', {id: trick.id}) }}" class="btn btn-outline-danger px-2 py-1">
                            <i class="bi bi-trash3-fill"></i>
                        </a>
                    </div>
                {% endif %}
            {% endif %}
            <div class="img-text bg-light">
                <h1 class="text-center pt-2">{{ trick.name }}</h1>
            </div>
        </div>
    </div>

    <div class="container"> 
        <button type="button" class="btn btn-outline-secondary mx-auto mt-4">See medias</button>
    </div>

    {# All images and videos for this thrick #}
    <div class="container mt-4" id="slideshow">
        <div class="row border shadow rounded p-2 justify-content-start h-100">
            {% for media in trick.getMedia %}
                {% if media.id != feature.id %}
                    <div class="col d-flex flex-column">
                    {% if media.type == "image" %}
                        <img src="/assets/medias/tricks/{{media.name}}" class="img-fluid" alt="..." height="100px">
                    {% else %}
                        <iframe width="180" height="100" src="{{media.url}}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen class="img-fluid"></iframe>
                    {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    {# All informations #}
    <div class="container my-4" id="informations">
        <div class="row border shadow rounded p-2 justify-content-start">
            <h1 class="py-4">{{ trick.name }}</h1>
            <br>
            <p class="pb-3">{{ trick.content }}</p>
            <br>
            <ul class="list-group list-group-horizontal w-100 mb-4">
                <li class="col list-group-item d-flex align-items-center">
                    <img src="/assets/medias/avatars/{{ trick.author.avatar }}" class="rounded-circle avatar" width="25px" height="25px">
                    <p class="my-0">Auteur : {{ trick.author.username }}</p>
                </li>
                <li class="col list-group-item d-flex align-items-center">
                    <i class="bi bi-collection-fill px-2"></i>
                    <p class="m-0">Collection : {{ trick.category }}</p>
                </li>
                <li class="col small list-group-item d-flex align-items-center">
                    <i class="bi bi-calendar-check-fill px-2"></i>
                    <p class="m-0">Date de modification : {{ trick.updatedAt|date("d/m/Y") }}</p>
                </li>
            </ul>
           

            {% if (app.user) %}
                {% if (app.user.id == trick.author.id) %}
                {# Comment form if user is log in #}
                <div class="row border-top pt-3">
                    <p class="lead bold">Laissez-nous un commentaire :</p>
                    <form class="form d-flex justify-content-evenly">
                        <div class="input-group mb-3 w-50">
                            <input type="text" class="form-control" placeholder="Message..." aria-label="Message..." aria-describedby="comment">
                            {# <span class="" id="comment"> _ your username</span> #}
                            <button type="submit" class="btn btn-outline-success input-group-text px-3 py-2">Valider</button>
                        </div>
                        
                    </form>
                </div>
                {% endif %}
            {% else %}
                {# Redirection if user is not log in #}
                <div class="row border-top pt-3">
                    <p class="lead bold text-center">
                        Pour ajouter un commentaire vous devez vous 
                        <a class="link">connecter</a> 
                        ou vous 
                        <a class="link">inscrire</a>
                    .</p>
                </div>
            {% endif %}
            {# List of all comments #}
            <div class="row border-top pt-3" id="comments">
                <p class="lead bold">Commentaires :</p>
                <div class="row">
                    <div class="col-2">
                        <img src="https://picsum.photos/id/256/70/70" class="pl-2 rounded-circle">
                    </div>
                    <figure class="col-10 border-bottom">
                        <blockquote class="blockquote">
                            <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                        
                        </blockquote>
                        <figcaption class="blockquote-footer">
                            <cite title="Username">Username</cite>
                        </figcaption>
                    </figure>
                </div>
                {# Examples... #}
                <div class="row">
                    <div class="col-2">
                        <img src="https://picsum.photos/id/845/70/70" class="pl-2 rounded-circle">
                    </div>
                    <figure class="col-10 border-bottom">
                        <blockquote class="blockquote">
                            <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                        </blockquote>
                        <figcaption class="blockquote-footer">
                            <cite title="Username">Username</cite>
                        </figcaption>
                    </figure>
                </div>
                <div class="row">
                    <div class="col-2">
                        <img src="https://picsum.photos/id/4/70/70" class="pl-2 rounded-circle">
                    </div>
                    <figure class="col-10 border-bottom">
                        <blockquote class="blockquote">
                            <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                        </blockquote>
                        <figcaption class="blockquote-footer">
                            <cite title="Username">Username</cite>
                        </figcaption>
                    </figure>
                </div>
                <div class="row">
                    <div class="col-2">
                        <img src="https://picsum.photos/id/8/70/70" class="pl-2 rounded-circle">
                    </div>
                    <figure class="col-10 border-bottom">
                        <blockquote class="blockquote">
                            <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                        </blockquote>
                        <figcaption class="blockquote-footer">
                            <cite title="Username">Username</cite>
                        </figcaption>
                    </figure>
                </div>
                <div class="row">
                    <div class="col-2">
                        <img src="https://picsum.photos/id/84/70/70" class="pl-2 rounded-circle">
                    </div>
                    <figure class="col-10 border-bottom">
                        <blockquote class="blockquote">
                            <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
                        </blockquote>
                        <figcaption class="blockquote-footer">
                            <cite title="Username">Username</cite>
                        </figcaption>
                    </figure>
                </div>
            </div>
            <button type="button" class="m-auto w-25 btn btn-outline-dark">Load more ...</button>
        </div>

    </div>
{% endblock %}
